!function () { var a = window.$ima || {}; if (window.$ima = a, a.campaignTracker) a.campaignTracker.bind(); else { var b = function () { function b(a) { a = a.split("+").join(" "); for (var c, b = {}, d = /[?&]?([^=]+)=([^&]*)/g; c = d.exec(a) ;) b[decodeURIComponent(c[1]).toLowerCase()] = decodeURIComponent(c[2]); return b } function d(a) { return a.split("?") } function e(a, b) { var c = g().name.toLowerCase(); "msie" === c || "ie" === c ? document.cookie = "emailCampaignTracker=" + JSON.stringify({ campaign: a, src: b }) + "; path=/" : document.cookie = "emailCampaignTracker=" + JSON.stringify({ campaign: a, src: b }) + "; expires=0; path=/" } function f(a, c) { for (var e, f, g, h, i = document.getElementsByClassName("ima-reg-link"), j = 0, k = i.length; j < k; j++) e = i[j].getAttribute("href"), e && (g = d(e), g.length > 1 ? (f = b(g[1]), f.campaign && f.src ? (h = "campaign=" + f.campaign, g[1] = g[1].replace(h, "campaign=" + a), h = "src=" + f.src, g[1] = g[1].replace(h, "src=" + c), e = g[0] + "?" + g[1]) : e = e + "&campaign=" + a + "&src=" + c) : e = e + "?campaign=" + a + "&src=" + c), i[j].setAttribute("href", e) } function g() { var b, a = navigator.userAgent, c = a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || []; return /trident/i.test(c[1]) ? (b = /\brv[ :]+(\d+)/g.exec(a) || [], { name: "IE", version: b[1] || "" }) : "Chrome" === c[1] && (b = a.match(/\bOPR|Edge\/(\d+)/), null != b) ? { name: "Opera", version: b[1] } : (c = c[2] ? [c[1], c[2]] : [navigator.appName, navigator.appVersion, "-?"], null != (b = a.match(/version\/(\d+)/i)) && c.splice(1, 1, b[1]), { name: c[0], version: c[1] }) } function h(a) { if (match = document.cookie.match(new RegExp(a + "=([^;]+)")), match) return match[1] } function i() { var a = b(document.location.search); a.campaign && a.src && e(a.campaign, a.src); var c = h("emailCampaignTracker"); c && (c = JSON.parse(c), f(c.campaign, a.src)) } return i(), a.campaignTracker = { bind: i }, a.campaignTracker }; b() } }();